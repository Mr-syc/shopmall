{"remainingRequest":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\acw\\Desktop\\shopmall\\src\\views\\home\\home.vue?vue&type=style&index=0&id=39f87be5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\acw\\Desktop\\shopmall\\src\\views\\home\\home.vue","mtime":1596883103725},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\css-loader\\dist\\cjs.js","mtime":1596336771225},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1596336772182},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\postcss-loader\\src\\index.js","mtime":1596336772011},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596336754335},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\vue-loader\\lib\\index.js","mtime":1596336772182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICAjaG9tZXsKICAgIGhlaWdodDogMTAwdmg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgfQoKCgouaG9tZS1uYXZ7CiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItdGludCk7CiAgY29sb3I6IHdoaXRlOwoKICAvKuS8mueUqOa1j+iniOWZqOWOn+eUn+a7muWKqOaXtu+8jOS4uuS6huiuqeWvvOiIquS4jei3n+maj+S4gOi1t+a7muWKqCovCiAgLypwb3NpdGlvbjogZml4ZWQ7Ki8KICAvKmxlZnQ6IDA7Ki8KICAvKnJpZ2h0OiAwOyovCiAgLyp0b3A6IDA7Ki8KICAvKnotaW5kZXg6IDk7Ki8KICB9CgoKICAuY29udGVudHsKICAgIC8qaGVpZ2h0OiAzMDBweDsqLwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDQ0cHg7CiAgICBib3R0b206IDQ5cHg7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CgogIH0KICAudGFiLWNvbnRyb2x7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB6LWluZGV4OiA5OwogIH0KCgogIC8qLmNvbnRlbnR7Ki8KICAvKiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA5M3B4KTsqLwogIC8qICBvdmVyZmxvdzogaGlkZGVuOyovCiAgLyogIG1hcmdpbi10b3A6IDQ0cHg7Ki8KICAvKn0qLwo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwKA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n  <div id=\"home\" >\r\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\r\n    <Tab-control :titles=\"['流行','新款','精选']\"\r\n                 @tabClick=\"tabClick\"\r\n                 ref=\"tabControl1\"\r\n                 class=\"tab-control\"\r\n                 v-show=\"isTabFixed\"/>\r\n    <scroll class=\"content\"\r\n            ref=\"scroll\"\r\n            :probe-type=\"3\"\r\n            :pull-up-load=\"true\"\r\n            @scroll=\"contentScroll\"\r\n            @pullingUp=\"getMore\">\r\n      <div>\r\n      <rotation :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"></rotation>\r\n      <Recommend-view :recommends=\"recommends\"></Recommend-view>\r\n      <feature-view></feature-view>\r\n      <Tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl\"></Tab-control>\r\n      <goods-list :goods=\"showGoods\"></goods-list>\r\n      </div>\r\n    </scroll>\r\n    <back-top @click.native=\"backClick\" v-show=\"isShow\"></back-top>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import rotation from \"./childrenComponents/rotation\";\r\n  import RecommendView from \"./childrenComponents/RecommendView\";\r\n  import featureView from \"./childrenComponents/featureView\";\r\n\r\n  import NavBar from \"components/common/navbar/NavBar\";\r\n  import TabControl from \"components/content/tabControl/TabControl\";\r\n  import goodsList from \"components/content/goods/goodsList\";\r\n  import scroll from \"components/common/scroll/scroll\";\r\n  import backTop from \"components/content/backtop/backTop\";\r\n\r\n\r\n  import {getHomeMultidata , getHomeGoods} from \"network/home\";\r\n  import {itemListenerMixin,backTopMixin} from \"../../common/mixin\";\r\n\r\n  export default {\r\n    name: \"home\",\r\n    components:{\r\n      rotation,\r\n      RecommendView,\r\n      featureView,\r\n      NavBar,\r\n      TabControl,\r\n      goodsList,\r\n      scroll,\r\n      backTop\r\n    },\r\n    data(){\r\n      return{\r\n        banners:[],\r\n        recommends:[],\r\n        goods:{\r\n          'pop': {page:0 ,list:[]},\r\n          'new': {page:0 ,list:[]},\r\n          'sell': {page:0 ,list:[]},\r\n        },\r\n        currentType:'pop',\r\n        tabOffsetTop:0,\r\n        isTabFixed:false,\r\n        saveY:0,\r\n        homeImgListener:null\r\n      }\r\n    },\r\n    created() {\r\n      //1.请求多个数据\r\n      this.getHomeMultidata()\r\n\r\n      //2.请求商品数据\r\n      this.getHomeGoods('pop')\r\n      this.getHomeGoods('new')\r\n      this.getHomeGoods('sell')\r\n\r\n\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    computed:{\r\n      showGoods(){\r\n        return this.goods[this.currentType].list\r\n      }\r\n    },\r\n    methods:{\r\n      //事件监听相关的方法\r\n      tabClick(index){\r\n        switch (index) {\r\n          case 0:\r\n            this.currentType = 'pop'\r\n            break\r\n          case 1:\r\n            this.currentType = 'new'\r\n            break\r\n          case 2 :\r\n            this.currentType = 'sell'\r\n            break\r\n          default:\r\n            this.currentType = 'pop'\r\n        }\r\n        this.$refs.tabControl.currentIndex = index;\r\n        this.$refs.tabControl1.currentIndex = index;\r\n\r\n      },\r\n\r\n      //tabControl的offsetTop显示\r\n      swiperImageLoad(){\r\n        this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\r\n        console.log(this.tabOffsetTop);\r\n\r\n      },\r\n      contentScroll(position){\r\n        //判断backTop是否显示\r\n        this.isShow = (-position.y) > 1000\r\n        //判断offsetTop，是否吸顶\r\n        this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n      },\r\n      // 网络请求相关的方法\r\n      getHomeMultidata() {\r\n        getHomeMultidata().then(res => {\r\n          this.banners = res.data.banner.list;\r\n          this.recommends = res.data.recommend.list;\r\n        })\r\n      },\r\n      getHomeGoods(type) {\r\n        const page = this.goods[type].page + 1;\r\n        getHomeGoods(type, page).then(res => {\r\n          // res => pop的前30条数据\r\n          // console.log(res);\r\n          const data = res.data.list;\r\n          this.goods[type].list.push(...data);\r\n          this.goods[type].page += 1;\r\n          //上拉加载更多\r\n          this.$refs.scroll.finishPullUp()\r\n        })\r\n      },\r\n      getMore(){\r\n        // console.log('上拉加载更多');\r\n        this.getHomeGoods(this.currentType)\r\n      }\r\n    },\r\n    mixins:[itemListenerMixin,backTopMixin],\r\n    destroyed() {\r\n      console.log('home被销毁了');\r\n    },\r\n    activated() {\r\n      this.$refs.scroll.scrollTo(0,this.saveY,0)\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    deactivated() {\r\n      // console.log(this.saveY);\r\n      //1.保存Y值\r\n      this.saveY = this.$refs.scroll.getScrollY()\r\n\r\n      //2.取消全局事件的监听\r\n      this.$bus.$off('itemImageLoad',this.homeImgListener)\r\n\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #home{\r\n    height: 100vh;\r\n    position: relative;\r\n  }\r\n\r\n\r\n\r\n.home-nav{\r\n  background-color: var(--color-tint);\r\n  color: white;\r\n\r\n  /*会用浏览器原生滚动时，为了让导航不跟随一起滚动*/\r\n  /*position: fixed;*/\r\n  /*left: 0;*/\r\n  /*right: 0;*/\r\n  /*top: 0;*/\r\n  /*z-index: 9;*/\r\n  }\r\n\r\n\r\n  .content{\r\n    /*height: 300px;*/\r\n    overflow: hidden;\r\n\r\n    position: absolute;\r\n    top: 44px;\r\n    bottom: 49px;\r\n    left: 0;\r\n    right: 0;\r\n\r\n  }\r\n  .tab-control{\r\n    position: relative;\r\n    z-index: 9;\r\n  }\r\n\r\n\r\n  /*.content{*/\r\n  /*  height: calc(100% - 93px);*/\r\n  /*  overflow: hidden;*/\r\n  /*  margin-top: 44px;*/\r\n  /*}*/\r\n</style>\r\n"]}]}