{"remainingRequest":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\acw\\Desktop\\shopmall\\src\\views\\home\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\acw\\Desktop\\shopmall\\src\\views\\home\\home.vue","mtime":1596883103725},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\acw\\Desktop\\shopmall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByb3RhdGlvbiBmcm9tICIuL2NoaWxkcmVuQ29tcG9uZW50cy9yb3RhdGlvbiI7CmltcG9ydCBSZWNvbW1lbmRWaWV3IGZyb20gIi4vY2hpbGRyZW5Db21wb25lbnRzL1JlY29tbWVuZFZpZXciOwppbXBvcnQgZmVhdHVyZVZpZXcgZnJvbSAiLi9jaGlsZHJlbkNvbXBvbmVudHMvZmVhdHVyZVZpZXciOwoKaW1wb3J0IE5hdkJhciBmcm9tICJjb21wb25lbnRzL2NvbW1vbi9uYXZiYXIvTmF2QmFyIjsKaW1wb3J0IFRhYkNvbnRyb2wgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L3RhYkNvbnRyb2wvVGFiQ29udHJvbCI7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2dvb2RzL2dvb2RzTGlzdCI7CmltcG9ydCBzY3JvbGwgZnJvbSAiY29tcG9uZW50cy9jb21tb24vc2Nyb2xsL3Njcm9sbCI7CmltcG9ydCBiYWNrVG9wIGZyb20gImNvbXBvbmVudHMvY29udGVudC9iYWNrdG9wL2JhY2tUb3AiOwoKCmltcG9ydCB7Z2V0SG9tZU11bHRpZGF0YSAsIGdldEhvbWVHb29kc30gZnJvbSAibmV0d29yay9ob21lIjsKaW1wb3J0IHtpdGVtTGlzdGVuZXJNaXhpbixiYWNrVG9wTWl4aW59IGZyb20gIi4uLy4uL2NvbW1vbi9taXhpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImhvbWUiLAogIGNvbXBvbmVudHM6ewogICAgcm90YXRpb24sCiAgICBSZWNvbW1lbmRWaWV3LAogICAgZmVhdHVyZVZpZXcsCiAgICBOYXZCYXIsCiAgICBUYWJDb250cm9sLAogICAgZ29vZHNMaXN0LAogICAgc2Nyb2xsLAogICAgYmFja1RvcAogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBiYW5uZXJzOltdLAogICAgICByZWNvbW1lbmRzOltdLAogICAgICBnb29kczp7CiAgICAgICAgJ3BvcCc6IHtwYWdlOjAgLGxpc3Q6W119LAogICAgICAgICduZXcnOiB7cGFnZTowICxsaXN0OltdfSwKICAgICAgICAnc2VsbCc6IHtwYWdlOjAgLGxpc3Q6W119LAogICAgICB9LAogICAgICBjdXJyZW50VHlwZToncG9wJywKICAgICAgdGFiT2Zmc2V0VG9wOjAsCiAgICAgIGlzVGFiRml4ZWQ6ZmFsc2UsCiAgICAgIHNhdmVZOjAsCiAgICAgIGhvbWVJbWdMaXN0ZW5lcjpudWxsCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8xLuivt+axguWkmuS4quaVsOaNrgogICAgdGhpcy5nZXRIb21lTXVsdGlkYXRhKCkKCiAgICAvLzIu6K+35rGC5ZWG5ZOB5pWw5o2uCiAgICB0aGlzLmdldEhvbWVHb29kcygncG9wJykKICAgIHRoaXMuZ2V0SG9tZUdvb2RzKCduZXcnKQogICAgdGhpcy5nZXRIb21lR29vZHMoJ3NlbGwnKQoKCiAgfSwKICBtb3VudGVkKCkgewoKICB9LAogIGNvbXB1dGVkOnsKICAgIHNob3dHb29kcygpewogICAgICByZXR1cm4gdGhpcy5nb29kc1t0aGlzLmN1cnJlbnRUeXBlXS5saXN0CiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIC8v5LqL5Lu255uR5ZCs55u45YWz55qE5pa55rOVCiAgICB0YWJDbGljayhpbmRleCl7CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3BvcCcKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy5jdXJyZW50VHlwZSA9ICduZXcnCiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMiA6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3NlbGwnCiAgICAgICAgICBicmVhawogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLmN1cnJlbnRUeXBlID0gJ3BvcCcKICAgICAgfQogICAgICB0aGlzLiRyZWZzLnRhYkNvbnRyb2wuY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMuJHJlZnMudGFiQ29udHJvbDEuY3VycmVudEluZGV4ID0gaW5kZXg7CgogICAgfSwKCiAgICAvL3RhYkNvbnRyb2znmoRvZmZzZXRUb3DmmL7npLoKICAgIHN3aXBlckltYWdlTG9hZCgpewogICAgICB0aGlzLnRhYk9mZnNldFRvcCA9IHRoaXMuJHJlZnMudGFiQ29udHJvbC4kZWwub2Zmc2V0VG9wCiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFiT2Zmc2V0VG9wKTsKCiAgICB9LAogICAgY29udGVudFNjcm9sbChwb3NpdGlvbil7CiAgICAgIC8v5Yik5patYmFja1RvcOaYr+WQpuaYvuekugogICAgICB0aGlzLmlzU2hvdyA9ICgtcG9zaXRpb24ueSkgPiAxMDAwCiAgICAgIC8v5Yik5patb2Zmc2V0VG9w77yM5piv5ZCm5ZC46aG2CiAgICAgIHRoaXMuaXNUYWJGaXhlZCA9ICgtcG9zaXRpb24ueSkgPiB0aGlzLnRhYk9mZnNldFRvcAogICAgfSwKICAgIC8vIOe9kee7nOivt+axguebuOWFs+eahOaWueazlQogICAgZ2V0SG9tZU11bHRpZGF0YSgpIHsKICAgICAgZ2V0SG9tZU11bHRpZGF0YSgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmJhbm5lcnMgPSByZXMuZGF0YS5iYW5uZXIubGlzdDsKICAgICAgICB0aGlzLnJlY29tbWVuZHMgPSByZXMuZGF0YS5yZWNvbW1lbmQubGlzdDsKICAgICAgfSkKICAgIH0sCiAgICBnZXRIb21lR29vZHModHlwZSkgewogICAgICBjb25zdCBwYWdlID0gdGhpcy5nb29kc1t0eXBlXS5wYWdlICsgMTsKICAgICAgZ2V0SG9tZUdvb2RzKHR5cGUsIHBhZ2UpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyByZXMgPT4gcG9w55qE5YmNMzDmnaHmlbDmja4KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YS5saXN0OwogICAgICAgIHRoaXMuZ29vZHNbdHlwZV0ubGlzdC5wdXNoKC4uLmRhdGEpOwogICAgICAgIHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArPSAxOwogICAgICAgIC8v5LiK5ouJ5Yqg6L295pu05aSaCiAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuZmluaXNoUHVsbFVwKCkKICAgICAgfSkKICAgIH0sCiAgICBnZXRNb3JlKCl7CiAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIrmi4nliqDovb3mm7TlpJonKTsKICAgICAgdGhpcy5nZXRIb21lR29vZHModGhpcy5jdXJyZW50VHlwZSkKICAgIH0KICB9LAogIG1peGluczpbaXRlbUxpc3RlbmVyTWl4aW4sYmFja1RvcE1peGluXSwKICBkZXN0cm95ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnaG9tZeiiq+mUgOavgeS6hicpOwogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCx0aGlzLnNhdmVZLDApCiAgICB0aGlzLiRyZWZzLnNjcm9sbC5yZWZyZXNoKCkKICB9LAogIGRlYWN0aXZhdGVkKCkgewogICAgLy8gY29uc29sZS5sb2codGhpcy5zYXZlWSk7CiAgICAvLzEu5L+d5a2YWeWAvAogICAgdGhpcy5zYXZlWSA9IHRoaXMuJHJlZnMuc2Nyb2xsLmdldFNjcm9sbFkoKQoKICAgIC8vMi7lj5bmtojlhajlsYDkuovku7bnmoTnm5HlkKwKICAgIHRoaXMuJGJ1cy4kb2ZmKCdpdGVtSW1hZ2VMb2FkJyx0aGlzLmhvbWVJbWdMaXN0ZW5lcikKCiAgfSwKfQo="},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n  <div id=\"home\" >\r\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\r\n    <Tab-control :titles=\"['流行','新款','精选']\"\r\n                 @tabClick=\"tabClick\"\r\n                 ref=\"tabControl1\"\r\n                 class=\"tab-control\"\r\n                 v-show=\"isTabFixed\"/>\r\n    <scroll class=\"content\"\r\n            ref=\"scroll\"\r\n            :probe-type=\"3\"\r\n            :pull-up-load=\"true\"\r\n            @scroll=\"contentScroll\"\r\n            @pullingUp=\"getMore\">\r\n      <div>\r\n      <rotation :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"></rotation>\r\n      <Recommend-view :recommends=\"recommends\"></Recommend-view>\r\n      <feature-view></feature-view>\r\n      <Tab-control :titles=\"['流行','新款','精选']\" @tabClick=\"tabClick\" ref=\"tabControl\"></Tab-control>\r\n      <goods-list :goods=\"showGoods\"></goods-list>\r\n      </div>\r\n    </scroll>\r\n    <back-top @click.native=\"backClick\" v-show=\"isShow\"></back-top>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import rotation from \"./childrenComponents/rotation\";\r\n  import RecommendView from \"./childrenComponents/RecommendView\";\r\n  import featureView from \"./childrenComponents/featureView\";\r\n\r\n  import NavBar from \"components/common/navbar/NavBar\";\r\n  import TabControl from \"components/content/tabControl/TabControl\";\r\n  import goodsList from \"components/content/goods/goodsList\";\r\n  import scroll from \"components/common/scroll/scroll\";\r\n  import backTop from \"components/content/backtop/backTop\";\r\n\r\n\r\n  import {getHomeMultidata , getHomeGoods} from \"network/home\";\r\n  import {itemListenerMixin,backTopMixin} from \"../../common/mixin\";\r\n\r\n  export default {\r\n    name: \"home\",\r\n    components:{\r\n      rotation,\r\n      RecommendView,\r\n      featureView,\r\n      NavBar,\r\n      TabControl,\r\n      goodsList,\r\n      scroll,\r\n      backTop\r\n    },\r\n    data(){\r\n      return{\r\n        banners:[],\r\n        recommends:[],\r\n        goods:{\r\n          'pop': {page:0 ,list:[]},\r\n          'new': {page:0 ,list:[]},\r\n          'sell': {page:0 ,list:[]},\r\n        },\r\n        currentType:'pop',\r\n        tabOffsetTop:0,\r\n        isTabFixed:false,\r\n        saveY:0,\r\n        homeImgListener:null\r\n      }\r\n    },\r\n    created() {\r\n      //1.请求多个数据\r\n      this.getHomeMultidata()\r\n\r\n      //2.请求商品数据\r\n      this.getHomeGoods('pop')\r\n      this.getHomeGoods('new')\r\n      this.getHomeGoods('sell')\r\n\r\n\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    computed:{\r\n      showGoods(){\r\n        return this.goods[this.currentType].list\r\n      }\r\n    },\r\n    methods:{\r\n      //事件监听相关的方法\r\n      tabClick(index){\r\n        switch (index) {\r\n          case 0:\r\n            this.currentType = 'pop'\r\n            break\r\n          case 1:\r\n            this.currentType = 'new'\r\n            break\r\n          case 2 :\r\n            this.currentType = 'sell'\r\n            break\r\n          default:\r\n            this.currentType = 'pop'\r\n        }\r\n        this.$refs.tabControl.currentIndex = index;\r\n        this.$refs.tabControl1.currentIndex = index;\r\n\r\n      },\r\n\r\n      //tabControl的offsetTop显示\r\n      swiperImageLoad(){\r\n        this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\r\n        console.log(this.tabOffsetTop);\r\n\r\n      },\r\n      contentScroll(position){\r\n        //判断backTop是否显示\r\n        this.isShow = (-position.y) > 1000\r\n        //判断offsetTop，是否吸顶\r\n        this.isTabFixed = (-position.y) > this.tabOffsetTop\r\n      },\r\n      // 网络请求相关的方法\r\n      getHomeMultidata() {\r\n        getHomeMultidata().then(res => {\r\n          this.banners = res.data.banner.list;\r\n          this.recommends = res.data.recommend.list;\r\n        })\r\n      },\r\n      getHomeGoods(type) {\r\n        const page = this.goods[type].page + 1;\r\n        getHomeGoods(type, page).then(res => {\r\n          // res => pop的前30条数据\r\n          // console.log(res);\r\n          const data = res.data.list;\r\n          this.goods[type].list.push(...data);\r\n          this.goods[type].page += 1;\r\n          //上拉加载更多\r\n          this.$refs.scroll.finishPullUp()\r\n        })\r\n      },\r\n      getMore(){\r\n        // console.log('上拉加载更多');\r\n        this.getHomeGoods(this.currentType)\r\n      }\r\n    },\r\n    mixins:[itemListenerMixin,backTopMixin],\r\n    destroyed() {\r\n      console.log('home被销毁了');\r\n    },\r\n    activated() {\r\n      this.$refs.scroll.scrollTo(0,this.saveY,0)\r\n      this.$refs.scroll.refresh()\r\n    },\r\n    deactivated() {\r\n      // console.log(this.saveY);\r\n      //1.保存Y值\r\n      this.saveY = this.$refs.scroll.getScrollY()\r\n\r\n      //2.取消全局事件的监听\r\n      this.$bus.$off('itemImageLoad',this.homeImgListener)\r\n\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #home{\r\n    height: 100vh;\r\n    position: relative;\r\n  }\r\n\r\n\r\n\r\n.home-nav{\r\n  background-color: var(--color-tint);\r\n  color: white;\r\n\r\n  /*会用浏览器原生滚动时，为了让导航不跟随一起滚动*/\r\n  /*position: fixed;*/\r\n  /*left: 0;*/\r\n  /*right: 0;*/\r\n  /*top: 0;*/\r\n  /*z-index: 9;*/\r\n  }\r\n\r\n\r\n  .content{\r\n    /*height: 300px;*/\r\n    overflow: hidden;\r\n\r\n    position: absolute;\r\n    top: 44px;\r\n    bottom: 49px;\r\n    left: 0;\r\n    right: 0;\r\n\r\n  }\r\n  .tab-control{\r\n    position: relative;\r\n    z-index: 9;\r\n  }\r\n\r\n\r\n  /*.content{*/\r\n  /*  height: calc(100% - 93px);*/\r\n  /*  overflow: hidden;*/\r\n  /*  margin-top: 44px;*/\r\n  /*}*/\r\n</style>\r\n"]}]}